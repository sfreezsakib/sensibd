<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SensiBD Premium Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <script type="text/javascript" src="https://pl27973568.effectivegatecpm.com/a3/7a/5b/a37a5b77fe911c2ad4f807bceac08e82.js"></script>
    <script type="text/javascript" src="https://pl27973575.effectivegatecpm.com/85/91/3c/85913c8d9ebf0d128a8114e95032ce40.js"></script>
    <style>
        body { background-color: #0f172a; color: white; font-family: 'Segoe UI', sans-serif; }
        .glass { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        .blur-secret { filter: blur(20px); pointer-events: none; user-select: none; transition: filter 0.5s; }
        .modal { opacity: 0; pointer-events: none; transition: all 0.3s ease; transform: scale(0.95); }
        .modal.active { opacity: 1; pointer-events: auto; transform: scale(1); }
        .task-btn.completed { background-color: #22c55e; border-color: #22c55e; pointer-events: none; color: white; }
    </style>
</head>
<body class="min-h-screen pb-24">

    <nav class="fixed top-0 w-full z-40 glass px-4 py-3 flex justify-between items-center shadow-2xl">
        <h1 class="text-xl font-black text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-400 tracking-wider">SENSIBD</h1>
        <div class="flex gap-3">
            <button onclick="openModal('uploadModal')" class="w-9 h-9 rounded-full bg-gradient-to-tr from-indigo-600 to-purple-600 shadow-lg flex items-center justify-center hover:scale-105 transition">
                <i class="fas fa-cloud-upload-alt text-white text-sm"></i>
            </button>
            <div class="relative">
                <input type="text" id="search" placeholder="Search..." class="bg-slate-800/80 rounded-full pl-3 py-1.5 text-sm w-28 focus:w-40 transition-all border border-slate-600 outline-none">
                <i class="fas fa-search absolute right-3 top-2.5 text-gray-400 text-xs"></i>
            </div>
        </div>
    </nav>

    <main id="app" class="pt-24 px-4 max-w-xl mx-auto grid gap-6">
        <div class="text-center mt-10">
            <i class="fas fa-spinner fa-spin text-indigo-500 text-2xl"></i>
            <p class="text-gray-500 text-xs mt-2">Loading Configs...</p>
        </div>
    </main>

    <div id="taskModal" class="modal fixed inset-0 z-[60] flex items-center justify-center bg-black/95 p-5 backdrop-blur-sm">
        <div class="bg-gray-900 border border-gray-700 rounded-2xl w-full max-w-sm p-6 text-center shadow-2xl relative">
            <div class="mb-4">
                <i class="fas fa-unlock-alt text-4xl text-yellow-500"></i>
            </div>
            <h2 class="text-xl font-bold text-white mb-2">‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶®‡¶≤‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <p class="text-gray-400 text-xs mb-6">‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡ß©‡¶ü‡¶ø ‡¶ü‡¶æ‡¶∏‡ßç‡¶ï ‡¶ï‡¶Æ‡¶™‡ßç‡¶≤‡¶ø‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶ì‡¶™‡ßá‡¶® ‡¶π‡¶¨‡ßá‡•§</p>
            
            <div class="space-y-3">
                <a href="https://www.youtube.com/@issakibbd" target="_blank" onclick="completeTask(this)" class="task-btn block w-full py-3 rounded-xl border border-red-900 bg-red-900/10 text-red-500 hover:bg-red-900/30 transition flex items-center justify-center gap-3 font-bold text-sm">
                    <i class="fab fa-youtube text-lg"></i> Subscribe Channel
                </a>
                <a href="https://www.facebook.com/issakib4" target="_blank" onclick="completeTask(this)" class="task-btn block w-full py-3 rounded-xl border border-blue-900 bg-blue-900/10 text-blue-500 hover:bg-blue-900/30 transition flex items-center justify-center gap-3 font-bold text-sm">
                    <i class="fab fa-facebook text-lg"></i> Follow Facebook
                </a>
                <a href="https://t.me/issakib" target="_blank" onclick="completeTask(this)" class="task-btn block w-full py-3 rounded-xl border border-sky-900 bg-sky-900/10 text-sky-500 hover:bg-sky-900/30 transition flex items-center justify-center gap-3 font-bold text-sm">
                    <i class="fab fa-telegram text-lg"></i> Join Telegram
                </a>
            </div>

            <p id="task-status" class="mt-4 text-[10px] text-gray-600">Checking tasks...</p>
        </div>
    </div>

    <div id="uploadModal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black/90 p-4">
        <div class="bg-gray-800 rounded-xl w-full max-w-sm border border-gray-700 overflow-hidden shadow-2xl">
            <div class="flex border-b border-gray-700">
                <button onclick="switchTab('upload')" class="flex-1 py-3 text-sm font-bold bg-indigo-600 text-white" id="tab-up">‡¶Ü‡¶™‡¶≤‡ßã‡¶°</button>
                <button onclick="switchTab('request')" class="flex-1 py-3 text-sm font-bold bg-gray-800 text-gray-400" id="tab-req">‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü</button>
            </div>
            <div class="p-5">
                <div id="form-upload" class="space-y-4">
                    <div class="text-center"><i class="fas fa-share-alt text-2xl text-indigo-500"></i></div>
                    <input type="text" id="up-device" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ (‡¶Ø‡ßá‡¶Æ‡¶®: Oppo A5s)" class="w-full bg-gray-900 p-3 rounded-lg text-sm border border-gray-700 focus:border-indigo-500 outline-none">
                    <input type="file" id="up-file" class="w-full text-xs text-gray-400 file:bg-gray-700 file:border-none file:rounded file:px-2 file:py-1 file:text-white">
                    <button onclick="sendUpload()" class="w-full bg-indigo-600 hover:bg-indigo-500 py-2.5 rounded-lg font-bold text-sm transition">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®‡¶ï‡ßá ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                </div>
                <div id="form-request" class="hidden space-y-4">
                    <div class="text-center"><i class="fas fa-question-circle text-2xl text-purple-500"></i></div>
                    <input type="text" id="req-device" placeholder="‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶®‡¶æ‡¶Æ" class="w-full bg-gray-900 p-3 rounded-lg text-sm border border-gray-700 focus:border-purple-500 outline-none">
                    <textarea id="req-reason" rows="2" placeholder="‡¶ï‡ßá‡¶® ‡¶™‡ßç‡¶∞‡ßü‡ßã‡¶ú‡¶®?..." class="w-full bg-gray-900 p-3 rounded-lg text-sm border border-gray-700 focus:border-purple-500 outline-none"></textarea>
                    <button onclick="sendRequest()" class="w-full bg-purple-600 hover:bg-purple-500 py-2.5 rounded-lg font-bold text-sm transition">‡¶∞‡¶ø‡¶ï‡ßã‡ßü‡ßá‡¶∏‡ßç‡¶ü ‡¶™‡¶æ‡¶†‡¶æ‡¶®</button>
                </div>
                <button onclick="closeModal('uploadModal')" class="w-full mt-4 text-xs text-red-400 hover:text-white">Close</button>
            </div>
        </div>
    </div>

    <div id="toast" class="fixed top-5 left-1/2 -translate-x-1/2 bg-gray-800 text-white px-5 py-2 rounded-full shadow-2xl text-xs font-bold hidden z-[70] border border-gray-600 flex gap-2 items-center">
        <i class="fas fa-check-circle text-green-400"></i> <span id="toast-msg">Success</span>
    </div>

    <script>
        // CONFIGURATION
        const CONFIG = {
            user: "sfreezsakib",
            repo: "sensibd",
            reqBot: "8035929255:AAFtYUflLVLPdBhzDn6vVjsxIkAALhqZtA4",
            adminChat: "6963247195"
        };
        
        let currentPostId = null;
        let tasksCompleted = 0;

        async function loadData() {
            try {
                const res = await fetch(`https://raw.githubusercontent.com/${CONFIG.user}/${CONFIG.repo}/main/data.json?t=${Date.now()}`);
                const posts = await res.json();
                if(posts.length === 0) document.getElementById('app').innerHTML = '<div class="text-center text-gray-500">‡¶ï‡ßã‡¶®‡ßã ‡¶™‡ßã‡¶∏‡ßç‡¶ü ‡¶®‡ßá‡¶á</div>';
                else document.getElementById('app').innerHTML = posts.map(renderPost).join('');
            } catch { 
                document.getElementById('app').innerHTML = '<div class="text-center text-red-400">Connection Error</div>'; 
            }
        }

        function renderPost(post) {
            return `
                <div class="glass rounded-xl overflow-hidden shadow-2xl group animate-fade-in relative">
                    <div class="relative h-52">
                        <img src="${post.thumb}" class="w-full h-full object-cover">
                        <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent"></div>
                        <div class="absolute bottom-3 left-3">
                            <h2 class="text-white font-bold text-lg drop-shadow-md leading-none">${post.title}</h2>
                            <span class="text-[10px] bg-indigo-600 text-white px-2 py-0.5 rounded uppercase font-bold mt-1 inline-block">${post.device}</span>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <div class="relative bg-slate-900/50 rounded-lg p-2 min-h-[150px] border border-slate-700/50 mb-4 overflow-hidden">
                            <div id="lock-${post.id}" class="absolute inset-0 z-10 flex flex-col items-center justify-center bg-slate-900/95 backdrop-blur-sm transition-all duration-500">
                                <div class="bg-gray-800 p-2 rounded-full mb-2 border border-gray-700">
                                    <i class="fas fa-lock text-xl text-yellow-500"></i>
                                </div>
                                <p class="text-[10px] text-gray-400 mb-3">Premium Config</p>
                                <button onclick="startTimer(${post.id})" class="bg-gradient-to-r from-indigo-600 to-indigo-500 px-5 py-2 rounded-full text-xs font-bold shadow-lg hover:scale-105 transition">Unlock Now (30s)</button>
                            </div>
                            <img src="${post.secret}" class="w-full h-full object-contain blur-secret" id="secret-${post.id}">
                        </div>

                        <div class="flex gap-3 opacity-40 pointer-events-none transition-all duration-500" id="btns-${post.id}">
                            <a href="${post.sensi_link}" target="_blank" class="flex-1 bg-gray-800 border border-gray-700 hover:bg-gray-700 py-2.5 rounded-xl text-center text-xs font-bold flex items-center justify-center gap-2">
                                <i class="fas fa-download text-indigo-400"></i> Sensi
                            </a>
                            <a href="${post.panel_link}" target="_blank" class="flex-1 bg-gray-800 border border-gray-700 hover:bg-gray-700 py-2.5 rounded-xl text-center text-xs font-bold flex items-center justify-center gap-2">
                                <i class="fas fa-code text-purple-400"></i> Panel
                            </a>
                        </div>
                    </div>
                </div>`;
        }

        // --- TIMER & TASK LOGIC ---
        window.startTimer = (id) => {
            const lockDiv = document.getElementById(`lock-${id}`);
            const btn = lockDiv.querySelector('button');
            btn.style.display = 'none';
            
            let time = 30;
            const display = document.createElement('div');
            display.innerHTML = `<span class="text-3xl font-mono text-yellow-400 font-bold">${time}</span><span class="text-[10px] block text-gray-500">seconds</span>`;
            lockDiv.appendChild(display);

            const timer = setInterval(() => {
                time--;
                display.querySelector('span').innerText = time;
                if(time < 0) {
                    clearInterval(timer);
                    currentPostId = id;
                    openModal('taskModal'); // Open Social Task Modal
                }
            }, 1000);
        }

        window.completeTask = (btn) => {
            if(btn.classList.contains('completed')) return;
            
            // Simulate check (Click implies done)
            setTimeout(() => {
                btn.classList.add('completed');
                btn.innerHTML = '<i class="fas fa-check"></i> Completed';
                btn.style.borderColor = "#22c55e";
                btn.style.color = "#fff";
                tasksCompleted++;
                
                if(tasksCompleted === 3) {
                    document.getElementById('task-status').innerText = "‚úÖ All tasks verified! Unlocking...";
                    document.getElementById('task-status').className = "mt-4 text-xs text-green-400 font-bold";
                    setTimeout(() => {
                        closeModal('taskModal');
                        fullyUnlock(currentPostId);
                        // Reset for next post
                        tasksCompleted = 0;
                        document.querySelectorAll('.task-btn').forEach(b => {
                            b.classList.remove('completed');
                            b.style = ""; // Reset styles
                            // Reset text manually if needed, simplified here
                        });
                        // Simple page reload to reset buttons text or complex logic (kept simple)
                        location.reload_task_ui(); 
                    }, 1500);
                }
            }, 2000); // 2 sec delay to simulate "checking"
        }

        // Helper to reset task UI text (hacky but works)
        window.location.reload_task_ui = () => {
             const btns = document.querySelectorAll('.task-btn');
             btns[0].innerHTML = '<i class="fab fa-youtube text-lg"></i> Subscribe Channel';
             btns[1].innerHTML = '<i class="fab fa-facebook text-lg"></i> Follow Facebook';
             btns[2].innerHTML = '<i class="fab fa-telegram text-lg"></i> Join Telegram';
        }

        function fullyUnlock(id) {
            const lockDiv = document.getElementById(`lock-${id}`);
            const secretImg = document.getElementById(`secret-${id}`);
            const btnsDiv = document.getElementById(`btns-${id}`);

            lockDiv.style.opacity = '0';
            setTimeout(() => lockDiv.style.display = 'none', 500);
            
            secretImg.classList.remove('blur-secret');
            btnsDiv.classList.remove('opacity-40', 'pointer-events-none');
            showToast("üîì File Unlocked!");
        }

        // --- UPLOAD & REQUEST LOGIC ---
        window.openModal = (id) => document.getElementById(id).classList.add('active');
        window.closeModal = (id) => document.getElementById(id).classList.remove('active');
        
        window.switchTab = (t) => {
            document.getElementById('form-upload').classList.toggle('hidden', t!=='upload');
            document.getElementById('form-request').classList.toggle('hidden', t!=='request');
            const upBtn = document.getElementById('tab-up');
            const reqBtn = document.getElementById('tab-req');
            upBtn.className = t==='upload' ? "flex-1 py-3 text-sm font-bold bg-indigo-600 text-white" : "flex-1 py-3 text-sm font-bold bg-gray-800 text-gray-400";
            reqBtn.className = t==='request' ? "flex-1 py-3 text-sm font-bold bg-purple-600 text-white" : "flex-1 py-3 text-sm font-bold bg-gray-800 text-gray-400";
        }

        async function sendUpload() {
            const dev = document.getElementById('up-device').value;
            const file = document.getElementById('up-file').files[0];
            if(!dev || !file) return showToast("‚ö†Ô∏è ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶õ‡¶¨‡¶ø ‡¶¶‡¶ø‡¶®");
            
            showToast("üì§ Sending...");
            const formData = new FormData();
            formData.append("chat_id", CONFIG.adminChat);
            formData.append("caption", `üì§ **New Upload**\nüì± ${dev}`);
            formData.append("photo", file);
            
            try {
                await fetch(`https://api.telegram.org/bot${CONFIG.reqBot}/sendPhoto`, {method:'POST', body:formData});
                showToast("‚úÖ Sent Successfully!"); closeModal('uploadModal');
            } catch { showToast("‚ùå Failed!"); }
        }

        async function sendRequest() {
            const dev = document.getElementById('req-device').value;
            const rsn = document.getElementById('req-reason').value;
            if(!dev) return showToast("‚ö†Ô∏è ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");

            showToast("üì© Sending...");
            try {
                await fetch(`https://api.telegram.org/bot${CONFIG.reqBot}/sendMessage`, {
                    method: 'POST', headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({chat_id: CONFIG.adminChat, text: `üì• **Request**\nüì± ${dev}\n‚ùì ${rsn}`})
                });
                showToast("‚úÖ Request Sent!"); closeModal('uploadModal');
            } catch { showToast("‚ùå Failed!"); }
        }

        function showToast(msg) {
            const t = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            t.classList.remove('hidden');
            setTimeout(() => t.classList.add('hidden'), 3000);
        }

        // Search
        document.getElementById('search').addEventListener('input', async (e) => {
            const term = e.target.value.toLowerCase();
            const res = await fetch(`https://raw.githubusercontent.com/${CONFIG.user}/${CONFIG.repo}/main/data.json`);
            const posts = await res.json();
            const filtered = posts.filter(p => p.device.toLowerCase().includes(term) || p.title.toLowerCase().includes(term));
            document.getElementById('app').innerHTML = filtered.length ? filtered.map(renderPost).join('') : '<div class="text-center text-gray-500">Not Found</div>';
        });

        loadData();
    </script>
</body>
</html>
